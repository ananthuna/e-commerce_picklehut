{"ast":null,"code":"import _slicedToArray from \"/home/ananthu/Desktop/e-commerce-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ananthu/Desktop/e-commerce-api/client/src/components/Header/cartIcon/cartIcon.js\";\nimport { Box } from '@mui/system';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport LocalMallOutlinedIcon from '@mui/icons-material/LocalMallOutlined';\nimport { Badge, IconButton } from '@mui/material';\nimport { UserContext } from '../../../Context/Context';\nimport axios from 'axios';\nimport { baseUrl } from '../../../url';\nimport './cartIcon.css';\nfunction cartIcon() {\n  var navigate = useNavigate();\n  var _useContext = useContext(UserContext),\n    cartitems = _useContext.cartitems,\n    setCartitems = _useContext.setCartitems;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  useEffect(function () {\n    var user = localStorage.getItem(\"user\");\n    user = JSON.parse(user);\n    if (!user) return navigate('/');\n    var customConfig = {\n      headers: {\n        'Authorization': \"Bearer \".concat(user.token)\n      }\n    };\n    // console.log('cart-api');\n    axios.get(\"\".concat(baseUrl, \"/api/cart/cartitems\"), customConfig).then(function (res) {\n      setItems(res.data.items);\n      setCartitems(res.data);\n      // console.log(cartitems);\n    }).catch(function (err) {\n      // console.log(\"error:\" + err.response.statusText);\n      if (err.response.statusText === 'Unauthorized') {\n        localStorage.clear();\n        navigate('/');\n      }\n    });\n  });\n  useEffect(function () {\n    setItems(cartitems.items);\n    // console.log('items'+cartitems);\n  }, [cartitems]);\n  return /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: \"iconButton\",\n    onClick: function onClick() {\n      return navigate('/cart');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    badgeContent: items && items.length,\n    sx: {\n      color: 'black',\n      \"& .MuiBadge-badge\": {\n        backgroundColor: \"yellow\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(LocalMallOutlinedIcon, {\n    className: \"cartIcon\",\n    sx: {\n      fontSize: 30,\n      color: 'white'\n      // \"&:hover\": {\n      //     color: 'yellow',\n      //     cursor: \"pointer\"\n      // }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  }))));\n}\nexport default cartIcon;","map":{"version":3,"names":["Box","React","useContext","useEffect","useState","useNavigate","LocalMallOutlinedIcon","Badge","IconButton","UserContext","axios","baseUrl","cartIcon","navigate","cartitems","setCartitems","items","setItems","user","localStorage","getItem","JSON","parse","customConfig","headers","token","get","then","res","data","catch","err","response","statusText","clear","length","color","backgroundColor","fontSize"],"sources":["/home/ananthu/Desktop/e-commerce-api/client/src/components/Header/cartIcon/cartIcon.js"],"sourcesContent":["import { Box } from '@mui/system'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport LocalMallOutlinedIcon from '@mui/icons-material/LocalMallOutlined';\nimport { Badge, IconButton } from '@mui/material';\nimport { UserContext } from '../../../Context/Context';\nimport axios from 'axios';\nimport { baseUrl } from '../../../url'\nimport './cartIcon.css'\n\nfunction cartIcon() {\n    const navigate = useNavigate()\n    const { cartitems, setCartitems } = useContext(UserContext)\n    const [items, setItems] = useState([])\n    useEffect(() => {\n        let user = localStorage.getItem(\"user\")\n        user = JSON.parse(user)\n        if (!user) return navigate('/')\n        const customConfig = {\n            headers: {\n                'Authorization': `Bearer ${user.token}`\n            }\n        }\n        // console.log('cart-api');\n        axios.get(`${baseUrl}/api/cart/cartitems`, customConfig)\n            .then((res) => {\n                setItems(res.data.items)\n                setCartitems(res.data)\n                // console.log(cartitems);\n            }).catch((err) => {\n                // console.log(\"error:\" + err.response.statusText);\n                if (err.response.statusText === 'Unauthorized') {\n                    localStorage.clear()\n                    navigate('/')\n                }\n            })\n\n    })\n\n    useEffect(() => {\n        setItems(cartitems.items)\n        // console.log('items'+cartitems);\n    }, [cartitems])\n\n\n\n    return (\n        <Box>\n            <IconButton className='iconButton' onClick={() => navigate('/cart')}>\n                <Badge badgeContent={items && items.length}\n                    sx={{\n                        color: 'black',\n                        \"& .MuiBadge-badge\": {\n                            backgroundColor: \"yellow\"\n                        }\n                    }}>\n                    <LocalMallOutlinedIcon className='cartIcon'\n                        sx={{\n                            fontSize: 30,\n                            color: 'white',\n                            // \"&:hover\": {\n                            //     color: 'yellow',\n                            //     cursor: \"pointer\"\n                            // }\n                        }} />\n                </Badge>\n            </IconButton>\n        </Box>\n    )\n}\n\nexport default cartIcon"],"mappings":";;AAAA,SAASA,GAAG,QAAQ,aAAa;AACjC,OAAOC,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,qBAAqB,MAAM,uCAAuC;AACzE,SAASC,KAAK,EAAEC,UAAU,QAAQ,eAAe;AACjD,SAASC,WAAW,QAAQ,0BAA0B;AACtD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,cAAc;AACtC,OAAO,gBAAgB;AAEvB,SAASC,QAAQ,GAAG;EAChB,IAAMC,QAAQ,GAAGR,WAAW,EAAE;EAAA,kBACMH,UAAU,CAACO,WAAW,CAAC;IAAnDK,SAAS,eAATA,SAAS;IAAEC,YAAY,eAAZA,YAAY;EAAA,gBACLX,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/BY,KAAK;IAAEC,QAAQ;EACtBd,SAAS,CAAC,YAAM;IACZ,IAAIe,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvCF,IAAI,GAAGG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;IACvB,IAAI,CAACA,IAAI,EAAE,OAAOL,QAAQ,CAAC,GAAG,CAAC;IAC/B,IAAMU,YAAY,GAAG;MACjBC,OAAO,EAAE;QACL,eAAe,mBAAYN,IAAI,CAACO,KAAK;MACzC;IACJ,CAAC;IACD;IACAf,KAAK,CAACgB,GAAG,WAAIf,OAAO,0BAAuBY,YAAY,CAAC,CACnDI,IAAI,CAAC,UAACC,GAAG,EAAK;MACXX,QAAQ,CAACW,GAAG,CAACC,IAAI,CAACb,KAAK,CAAC;MACxBD,YAAY,CAACa,GAAG,CAACC,IAAI,CAAC;MACtB;IACJ,CAAC,CAAC,CAACC,KAAK,CAAC,UAACC,GAAG,EAAK;MACd;MACA,IAAIA,GAAG,CAACC,QAAQ,CAACC,UAAU,KAAK,cAAc,EAAE;QAC5Cd,YAAY,CAACe,KAAK,EAAE;QACpBrB,QAAQ,CAAC,GAAG,CAAC;MACjB;IACJ,CAAC,CAAC;EAEV,CAAC,CAAC;EAEFV,SAAS,CAAC,YAAM;IACZc,QAAQ,CAACH,SAAS,CAACE,KAAK,CAAC;IACzB;EACJ,CAAC,EAAE,CAACF,SAAS,CAAC,CAAC;EAIf,oBACI,oBAAC,GAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,UAAU;IAAC,SAAS,EAAC,YAAY;IAAC,OAAO,EAAE;MAAA,OAAMD,QAAQ,CAAC,OAAO,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAChE,oBAAC,KAAK;IAAC,YAAY,EAAEG,KAAK,IAAIA,KAAK,CAACmB,MAAO;IACvC,EAAE,EAAE;MACAC,KAAK,EAAE,OAAO;MACd,mBAAmB,EAAE;QACjBC,eAAe,EAAE;MACrB;IACJ,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACF,oBAAC,qBAAqB;IAAC,SAAS,EAAC,UAAU;IACvC,EAAE,EAAE;MACAC,QAAQ,EAAE,EAAE;MACZF,KAAK,EAAE;MACP;MACA;MACA;MACA;IACJ,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CACL,CACC,CACX;AAEd;AAEA,eAAexB,QAAQ"},"metadata":{},"sourceType":"module"}