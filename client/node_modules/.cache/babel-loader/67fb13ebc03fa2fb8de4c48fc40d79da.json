{"ast":null,"code":"import _slicedToArray from \"/home/ananthu/Desktop/e-commerce-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ananthu/Desktop/e-commerce-api/client/src/components/Cart/CartItems.js\";\nimport { Box, Paper } from '@mui/material';\nimport Button from '@mui/material/Button';\nimport React, { useContext, useEffect } from 'react';\nimport List from './List/List';\nimport Address from './Address/Address';\nimport TotalPrice from './TotalPrice/TotalPrice';\nimport axios from 'axios';\nimport { baseUrl } from '../../url';\nimport { UserContext } from '../../Context/Context';\nimport { useNavigate } from 'react-router-dom';\nfunction CartItems() {\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    cart = _React$useState2[0],\n    setCart = _React$useState2[1];\n  var _useContext = useContext(UserContext),\n    cartitems = _useContext.cartitems,\n    setCartitems = _useContext.setCartitems;\n  var _useContext2 = useContext(UserContext),\n    address = _useContext2.address,\n    setAddress = _useContext2.setAddress;\n  var _React$useState3 = React.useState(''),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    name = _React$useState4[0],\n    setName = _React$useState4[1];\n  var _React$useState5 = React.useState(''),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    number = _React$useState6[0],\n    setNumber = _React$useState6[1];\n  var navigate = useNavigate();\n  var _useContext3 = useContext(UserContext),\n    setValue = _useContext3.setValue;\n  useEffect(function () {\n    var user = localStorage.getItem(\"user\");\n    user = JSON.parse(user);\n    var customConfig = {\n      headers: {\n        'Authorization': \"Bearer \".concat(user.token)\n      }\n    };\n    axios.get(\"\".concat(baseUrl, \"/api/cart/cartitems\"), customConfig).then(function (res) {\n      setCart(true);\n      setCartitems(res.data);\n    });\n    axios.get(\"\".concat(baseUrl, \"/api/user/address\"), customConfig).then(function (res) {\n      setAddress(res.data.address[0]);\n      setName(res.data.firstName);\n      setNumber(res.data.number);\n    });\n  }, []);\n  var handlePlaceOrder = function handlePlaceOrder() {\n    if (!address) return alert('delivery address is empty');\n    // if (!number) {\n    //     alert('Need contact number added.')\n    //     setValue(0)\n    //     navigate('/account')\n    //     return\n    // }\n    if (cartitems.items.length === 0) return navigate('/');\n    var user = localStorage.getItem(\"user\");\n    user = JSON.parse(user);\n    var customConfig = {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \".concat(user.token)\n      }\n    };\n    var Data = {\n      amount: cartitems.bill + 40,\n      address: address._id,\n      items: cartitems.items\n    };\n    if (cartitems.items) {\n      axios.post(\"\".concat(baseUrl, \"/api/order/placeOrder\"), Data, customConfig).then(function (res) {\n        navigate('/order');\n      });\n    } else {\n      alert('cart is empty');\n    }\n  };\n  return /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      display: 'flex',\n      bgcolor: '#F8F8F8',\n      pb: '9rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      mt: '5.6rem',\n      width: '60%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Address, {\n    address: address,\n    name: name,\n    number: number,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(List, {\n    items: cartitems.items,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    sx: {\n      position: 'relative',\n      display: 'flex',\n      justifyContent: 'end',\n      m: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    sx: {\n      bgcolor: '#ef6c00',\n      \"&:hover\": {\n        backgroundColor: \"#ef6c00\"\n      },\n      m: '1.5rem'\n    },\n    onClick: handlePlaceOrder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, \"Place Order\")))), /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      width: '40%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, cart && /*#__PURE__*/React.createElement(TotalPrice, {\n    bill: cartitems.bill,\n    items: cartitems.items,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 26\n    }\n  })));\n}\nexport default CartItems;","map":{"version":3,"names":["Box","Paper","Button","React","useContext","useEffect","List","Address","TotalPrice","axios","baseUrl","UserContext","useNavigate","CartItems","useState","cart","setCart","cartitems","setCartitems","address","setAddress","name","setName","number","setNumber","navigate","setValue","user","localStorage","getItem","JSON","parse","customConfig","headers","token","get","then","res","data","firstName","handlePlaceOrder","alert","items","length","Data","amount","bill","_id","post","display","bgcolor","pb","mt","width","position","justifyContent","m","backgroundColor"],"sources":["/home/ananthu/Desktop/e-commerce-api/client/src/components/Cart/CartItems.js"],"sourcesContent":["import { Box, Paper } from '@mui/material'\nimport Button from '@mui/material/Button';\nimport React, { useContext, useEffect } from 'react'\nimport List from './List/List'\nimport Address from './Address/Address'\nimport TotalPrice from './TotalPrice/TotalPrice'\nimport axios from 'axios'\nimport { baseUrl } from '../../url'\nimport { UserContext } from '../../Context/Context'\nimport { useNavigate } from 'react-router-dom';\n\nfunction CartItems() {\n    const [cart, setCart] = React.useState(false)\n    const { cartitems, setCartitems } = useContext(UserContext)\n    const { address, setAddress } = useContext(UserContext)\n    const [name, setName] = React.useState('')\n    const [number, setNumber] = React.useState('')\n    const navigate = useNavigate()\n    const { setValue } = useContext(UserContext)\n\n    useEffect(() => {\n        let user = localStorage.getItem(\"user\")\n        user = JSON.parse(user)\n        const customConfig = {\n            headers: {\n                'Authorization': `Bearer ${user.token}`\n            }\n        }\n\n        axios.get(`${baseUrl}/api/cart/cartitems`, customConfig)\n            .then((res) => {\n                setCart(true)\n                setCartitems(res.data)\n\n            })\n\n\n        axios.get(`${baseUrl}/api/user/address`, customConfig)\n            .then((res) => {\n                setAddress(res.data.address[0])\n                setName(res.data.firstName)\n                setNumber(res.data.number)\n            })\n\n    }, [])\n\n\n    const handlePlaceOrder = () => {\n        if (!address) return alert('delivery address is empty')\n        // if (!number) {\n        //     alert('Need contact number added.')\n        //     setValue(0)\n        //     navigate('/account')\n        //     return\n        // }\n        if (cartitems.items.length === 0) return navigate('/')\n        let user = localStorage.getItem(\"user\")\n        user = JSON.parse(user)\n        const customConfig = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${user.token}`\n            }\n        }\n        const Data = {\n            amount: cartitems.bill + 40,\n            address: address._id,\n            items: cartitems.items\n        }\n\n        if (cartitems.items) {\n            axios.post(`${baseUrl}/api/order/placeOrder`, Data, customConfig)\n                .then((res) => {\n                    navigate('/order')\n                })\n        } else {\n            alert('cart is empty')\n        }\n    }\n\n\n    return (\n        <Box sx={{\n            display: 'flex',\n            bgcolor: '#F8F8F8',\n            pb: '9rem'\n        }}>\n            <Box sx={{\n                mt: '5.6rem',\n                width: '60%'\n            }}>\n                <Address address={address} name={name} number={number} />\n\n                <List items={cartitems.items} />\n\n                <Box>\n                    <Paper sx={{\n                        position: 'relative',\n                        display: 'flex',\n                        justifyContent: 'end',\n                        m: '1rem'\n                    }}>\n                        <Button variant=\"contained\" sx={{\n                            bgcolor: '#ef6c00',\n                            \"&:hover\": { backgroundColor: \"#ef6c00\" },\n                            m: '1.5rem'\n                        }}\n                            onClick={handlePlaceOrder}\n                        >Place Order</Button>\n                    </Paper>\n                </Box>\n            </Box>\n            <Box sx={{\n                width: '40%'\n            }}>\n                {cart && <TotalPrice bill={cartitems.bill} items={cartitems.items} />}\n            </Box>\n        </Box>\n    )\n}\n\nexport default CartItems"],"mappings":"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"},"metadata":{},"sourceType":"module"}