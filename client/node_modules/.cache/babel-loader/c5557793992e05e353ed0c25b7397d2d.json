{"ast":null,"code":"import _slicedToArray from \"/home/ananthu/Desktop/e-commerce-api/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ananthu/Desktop/e-commerce-api/client/src/components/Header/cartIcon/cartIcon.js\";\nimport { Box } from '@mui/system';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport LocalMallOutlinedIcon from '@mui/icons-material/LocalMallOutlined';\nimport { Badge, IconButton } from '@mui/material';\nimport { UserContext } from '../../../Context/Context';\nimport axios from 'axios';\nimport { baseUrl } from '../../../url';\nfunction cartIcon(_ref) {\n  var setLogin = _ref.setLogin;\n  var navigate = useNavigate();\n  var _useContext = useContext(UserContext),\n    cartitems = _useContext.cartitems,\n    setCartitems = _useContext.setCartitems;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    items = _useState2[0],\n    setItems = _useState2[1];\n  useEffect(function () {\n    var user = localStorage.getItem(\"user\");\n    user = JSON.parse(user);\n    if (!user) return navigate('/');\n    var customConfig = {\n      headers: {\n        'Authorization': \"Bearer \".concat(user.token)\n      }\n    };\n    axios.get(\"\".concat(baseUrl, \"/api/cart/cartitems\"), customConfig).then(function (res) {\n      setItems(res.data.items);\n      setCartitems(res.data);\n    }).catch(function (err) {\n      if (err.response.statusText === 'Unauthorized') {\n        navigate('/');\n      }\n    });\n  }, [cartitems]);\n  return /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    onClick: function onClick() {\n      return navigate('/cart');\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Badge, {\n    badgeContent: items && items.length,\n    color: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(LocalMallOutlinedIcon, {\n    sx: {\n      fontSize: 30\n    },\n    color: \"action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 21\n    }\n  }))));\n}\nexport default cartIcon;","map":{"version":3,"names":["Box","React","useContext","useEffect","useState","useNavigate","LocalMallOutlinedIcon","Badge","IconButton","UserContext","axios","baseUrl","cartIcon","setLogin","navigate","cartitems","setCartitems","items","setItems","user","localStorage","getItem","JSON","parse","customConfig","headers","token","get","then","res","data","catch","err","response","statusText","length","fontSize"],"sources":["/home/ananthu/Desktop/e-commerce-api/client/src/components/Header/cartIcon/cartIcon.js"],"sourcesContent":["import { Box } from '@mui/system'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport LocalMallOutlinedIcon from '@mui/icons-material/LocalMallOutlined';\nimport { Badge, IconButton } from '@mui/material';\nimport { UserContext } from '../../../Context/Context';\nimport axios from 'axios';\nimport { baseUrl } from '../../../url'\n\nfunction cartIcon({ setLogin }) {\n    const navigate = useNavigate()\n    const { cartitems, setCartitems } = useContext(UserContext)\n    const [items, setItems] = useState([])\n    useEffect(() => {\n        let user = localStorage.getItem(\"user\")\n        user = JSON.parse(user)\n        if (!user) return navigate('/')\n        const customConfig = {\n            headers: {\n                'Authorization': `Bearer ${user.token}`\n            }\n        }\n\n        axios.get(`${baseUrl}/api/cart/cartitems`, customConfig)\n            .then((res) => {\n                setItems(res.data.items)\n                setCartitems(res.data)\n            }).catch((err) => {\n                if (err.response.statusText === 'Unauthorized') {\n                    navigate('/')\n                }\n            })\n\n    }, [cartitems])\n\n\n    return (\n        <Box>\n            <IconButton onClick={() => navigate('/cart')}>\n                <Badge badgeContent={items && items.length} color='success'>\n                    <LocalMallOutlinedIcon sx={{ fontSize: 30 }} color=\"action\" />\n                </Badge>\n            </IconButton>\n        </Box>\n    )\n}\n\nexport default cartIcon"],"mappings":";;AAAA,SAASA,GAAG,QAAQ,aAAa;AACjC,OAAOC,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,qBAAqB,MAAM,uCAAuC;AACzE,SAASC,KAAK,EAAEC,UAAU,QAAQ,eAAe;AACjD,SAASC,WAAW,QAAQ,0BAA0B;AACtD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,QAAQ,cAAc;AAEtC,SAASC,QAAQ,OAAe;EAAA,IAAZC,QAAQ,QAARA,QAAQ;EACxB,IAAMC,QAAQ,GAAGT,WAAW,EAAE;EAAA,kBACMH,UAAU,CAACO,WAAW,CAAC;IAAnDM,SAAS,eAATA,SAAS;IAAEC,YAAY,eAAZA,YAAY;EAAA,gBACLZ,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/Ba,KAAK;IAAEC,QAAQ;EACtBf,SAAS,CAAC,YAAM;IACZ,IAAIgB,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvCF,IAAI,GAAGG,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;IACvB,IAAI,CAACA,IAAI,EAAE,OAAOL,QAAQ,CAAC,GAAG,CAAC;IAC/B,IAAMU,YAAY,GAAG;MACjBC,OAAO,EAAE;QACL,eAAe,mBAAYN,IAAI,CAACO,KAAK;MACzC;IACJ,CAAC;IAEDhB,KAAK,CAACiB,GAAG,WAAIhB,OAAO,0BAAuBa,YAAY,CAAC,CACnDI,IAAI,CAAC,UAACC,GAAG,EAAK;MACXX,QAAQ,CAACW,GAAG,CAACC,IAAI,CAACb,KAAK,CAAC;MACxBD,YAAY,CAACa,GAAG,CAACC,IAAI,CAAC;IAC1B,CAAC,CAAC,CAACC,KAAK,CAAC,UAACC,GAAG,EAAK;MACd,IAAIA,GAAG,CAACC,QAAQ,CAACC,UAAU,KAAK,cAAc,EAAE;QAC5CpB,QAAQ,CAAC,GAAG,CAAC;MACjB;IACJ,CAAC,CAAC;EAEV,CAAC,EAAE,CAACC,SAAS,CAAC,CAAC;EAGf,oBACI,oBAAC,GAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACA,oBAAC,UAAU;IAAC,OAAO,EAAE;MAAA,OAAMD,QAAQ,CAAC,OAAO,CAAC;IAAA,CAAC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACzC,oBAAC,KAAK;IAAC,YAAY,EAAEG,KAAK,IAAIA,KAAK,CAACkB,MAAO;IAAC,KAAK,EAAC,SAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACvD,oBAAC,qBAAqB;IAAC,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAG,CAAE;IAAC,KAAK,EAAC,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAAG,CAC1D,CACC,CACX;AAEd;AAEA,eAAexB,QAAQ"},"metadata":{},"sourceType":"module"}